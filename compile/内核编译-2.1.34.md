## 生成配置文件

```bash
make config ARCH='i386'
```

### 分步解析

* 刷新`symlinks`
  * 创建`asm`软链接
  * 创建`modules`目录
  * 创建`include/linux/modules`目录 
* 调用`scripts/Configure`生成配置文件
  * 首先会生成`.tmpconfig`，`.tmpconfig.h` 文件
  * 然后将上述两个文件分别变成 `.config`，`autoconfig.h` 文件

### 常用命令

```bash
# 查找空目录
find ./ -path "./.git" -prune -o -type d -empty -print
```



## 生成依赖文件

```bash
make depend --debug='b' ARCH='i386'
```

### 分步解析

* 生成`mkdep`文件

  ```bash
  gcc -O2 -fomit-frame-pointer -o scripts/mkdep scripts/mkdep.c
  ```

* 



| 版本号  | 是否可行 |
| ------- | -------- |
| 2.1.35  | X        |
|         |          |
| 2.1.85  | X        |
|         |          |
| 2.1.132 | X        |
|         |          |













## 目录恢复

```bash
git clean -d -f
```





## 附录

### Git操作命令

```bash
# 存储当前修改
git stash
# 回复当前修改
git stash apply
# 查看栈上保存修改
git stash list
```

### makefile调试开关

| 调试选项    |                                        |
| ----------- | -------------------------------------- |
| --debug='b' | 输出`target`是否过时，是否成功更新信息 |
| --debug='v' | 'b' 基础上输出`Makefile`文件解析信息   |

